<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Gallery</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: radial-gradient(circle, #e2b0ff, #8a2be2 80%, #4b0082);
            color: #f0f0f0;
            overflow-x: hidden;
        }

        nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 20px;
            background: #3c3b6e;
            position: sticky;
            top: 0;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.7);
        }

        nav a {
            text-decoration: none;
            font-size: 1.1rem;
            color: #f0f0f0;
            padding: 10px 15px;
            background: linear-gradient(145deg, #6829c2, #8a2be2);
            border: 1px solid #4b0082;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        section {
            padding: 40px 20px;
            margin: 20px auto;
            max-width: 1200px;
            background: rgba(20, 20, 60, 0.9);
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.7);
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .gallery-item img {
            width: 100%;
            height: auto;
            display: block;
        }

        .download-btn {
            position: absolute;
            bottom: 10px;
            right: 10px;
            padding: 8px 12px;
            background: #ff69b4;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.3s;
        }

        .download-btn:hover {
            background: #ff1493;
        }
    </style>
</head>
<body>
    <nav>
        <a href="../index.html">üè†</a>
        <a href="../universe/universe.html">The Universe</a>
        <a href="../Planets/planets.html">Planets</a>
        <a href="../facts/facts.html">Facts</a>
        <a href="#">Gallery</a>
        <a href="../Contact us form/contact.html">Contact us</a>
    </nav>

    <header>
        <h1>NASA Space Gallery</h1>
        <p>Discover and download amazing space imagery.</p>
    </header>
    <main>
        <div class="gallery" id="gallery"></div>
    </main>
    <script type="module">
        import { fetchData } from '../main/api.js';

        async function displaySpaceData(date, sectionId) {
            try {
                const data = await fetchData(date);
                if (data) {
                    showDataOnUI(data, sectionId); 
                } else {
                    console.error('No data received for', sectionId);
                }
            } catch (error) {
                console.error('Error displaying data for', sectionId, error);
            }
        }

        function showDataOnUI(data, sectionId) {
            const galleryContainer = document.getElementById('gallery');
            const galleryItem = document.createElement("div");
            galleryItem.classList.add("gallery-item");

            const img = document.createElement("img");
            img.src = data.hdurl || data.url; 
            img.alt = data.title;

            const title = document.createElement("h2");
            title.textContent = data.title;

            const downloadBtn = document.createElement("button");
            downloadBtn.classList.add("download-btn");
            downloadBtn.textContent = "Download";
            downloadBtn.onclick = () => downloadImage(img.src, data.title);

            galleryItem.appendChild(img);
            galleryItem.appendChild(title);
            galleryItem.appendChild(downloadBtn);
            galleryContainer.appendChild(galleryItem);
        }

        const dates = {
            'LDN 1471': '2024-11-17',
            'NGC 281': '2024-11-18',
            'M106': '2024-10-09',
            'Intergalactic skyscape': '2024-11-07',
            'Comet Tsuchinshan-Atlas': '2024-11-06',
            Mars: '2024-11-10',
            Saturn: '2024-11-02',
            Jupiter: '2024-11-03',
            'Milky Way Galaxy': '2024-11-08',
            Neptune: '2024-11-09',
            'Moon': '2024-11-15',
            'Pluto': '2024-11-16',
        };

        Object.entries(dates).forEach(([sectionId, date]) => {
            displaySpaceData(date, sectionId); 
        });

        function downloadImage(url, filename) {
            fetch(url)
            .then((response) => response.blob())
            .then((blob) => {
                const link = document.createElement("a");
                link.href = URL.createObjectURL(blob);
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            })
            .catch((error) => console.error("Error downloading image:", error));
        }
    </script>
</body>
</html>
